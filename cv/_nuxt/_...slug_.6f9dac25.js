import{G as b,m as y,H as v,I as w,J as D,K as C,u as m,L as x,M as P,E as O,D as B,N as M,a as S,O as A,h as E,r as $,o as H,c as N,q as j}from"./entry.16dc278f.js";const z=()=>null;function I(...r){var h;const c=typeof r[r.length-1]=="string"?r.pop():void 0;typeof r[0]!="string"&&r.unshift(c);let[a,o,e={}]=r;if(typeof a!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof o!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");e.server=e.server??!0,e.default=e.default??z,e.lazy=e.lazy??!1,e.immediate=e.immediate??!0;const t=b(),u=()=>t.isHydrating?t.payload.data[a]:t.static.data[a],l=()=>u()!==void 0;t._asyncData[a]||(t._asyncData[a]={data:y(u()??((h=e.default)==null?void 0:h.call(e))??null),pending:y(!l()),error:y(t.payload._errors[a]?v(t.payload._errors[a]):null)});const s={...t._asyncData[a]};s.refresh=s.execute=(i={})=>{if(t._asyncDataPromises[a]){if(i.dedupe===!1)return t._asyncDataPromises[a];t._asyncDataPromises[a].cancelled=!0}if(i._initial&&l())return u();s.pending.value=!0;const f=new Promise((n,d)=>{try{n(o(t))}catch(k){d(k)}}).then(n=>{if(f.cancelled)return t._asyncDataPromises[a];e.transform&&(n=e.transform(n)),e.pick&&(n=K(n,e.pick)),s.data.value=n,s.error.value=null}).catch(n=>{var d;if(f.cancelled)return t._asyncDataPromises[a];s.error.value=n,s.data.value=m(((d=e.default)==null?void 0:d.call(e))??null)}).finally(()=>{f.cancelled||(s.pending.value=!1,t.payload.data[a]=s.data.value,s.error.value&&(t.payload._errors[a]=v(s.error.value)),delete t._asyncDataPromises[a])});return t._asyncDataPromises[a]=f,t._asyncDataPromises[a]};const p=()=>s.refresh({_initial:!0}),g=e.server!==!1&&t.payload.serverRendered;{const i=x();if(i&&!i._nuxtOnBeforeMountCbs){i._nuxtOnBeforeMountCbs=[];const n=i._nuxtOnBeforeMountCbs;i&&(w(()=>{n.forEach(d=>{d()}),n.splice(0,n.length)}),D(()=>n.splice(0,n.length)))}g&&t.isHydrating&&l()?s.pending.value=!1:i&&(t.payload.serverRendered&&t.isHydrating||e.lazy)&&e.immediate?i._nuxtOnBeforeMountCbs.push(p):e.immediate&&p(),e.watch&&C(e.watch,()=>s.refresh());const f=t.hook("app:data:refresh",n=>{if(!n||n.includes(a))return s.refresh()});i&&D(f)}const _=Promise.resolve(t._asyncDataPromises[a]).then(()=>s);return Object.assign(_,s),_}function K(r,c){const a={};for(const o of c)a[o]=r[o];return a}const R=async(r,c={},a={})=>{const o=`${JSON.stringify(c)}${r}`,e=P(`${o}-state`,()=>null),t=O();B(()=>{e.value&&e.value.id&&M(e.value.id,l=>e.value=l,a)});const{data:u}=await I(`${o}-asyncdata`,async()=>await t.get(`cdn/stories/${r}`,c));return e.value=u.value.data.story,e},q=R,T=S({__name:"[...slug]",async setup(r){let c,a;const{slug:o}=A().params,e=([c,a]=E(()=>q(o&&o.length>0?o.join("/"):"home",{version:"draft"})),c=await c,a(),c);return(t,u)=>{const l=$("StoryblokComponent");return m(e)?(H(),N(l,{key:0,blok:m(e).content},null,8,["blok"])):j("",!0)}}});export{T as default};
